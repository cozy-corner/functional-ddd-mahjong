# 麻雀で学ぶ関数型ドメインモデリング - 学習進行TODO

## フェーズ1: Tile型定義 → Hand管理
**学習目標：型安全性とドメイン表現**

### 1.1 基本型定義
- [ ] Tile型の定義（萬子、筒子、索子、字牌）
- [ ] 不正な牌（萬子の10など）をコンパイル時に防ぐ設計
- [ ] 基本的なTile作成関数とバリデーション

### 1.2 Hand管理
- [ ] Hand型の定義（14牌の制約）
- [ ] 手牌の基本操作（追加、削除、ソート）
- [ ] Result型を使ったエラーハンドリング

### 1.3 テストとバリデーション
- [ ] 正常なTile生成のテスト
- [ ] 不正なTile処理のテスト（エラーケース）
- [ ] Hand操作のテスト

**習得スキル**
- [ ] 型駆動設計の実践
- [ ] 不変性の活用
- [ ] Value Objectパターン
- [ ] 基本的なResult型バリデーション

---

## フェーズ2: Meld検出 → Winning hand判定
**学習目標：関数合成とパターンマッチング**

### 2.1 Meld型定義
- [ ] 順子（Sequence）型の定義と検出関数
- [ ] 刻子（Triplet）型の定義と検出関数
- [ ] 雀頭（Pair）型の定義と検出関数

### 2.2 面子分解
- [ ] 14牌からの全ての面子組み合わせを検出
- [ ] 4面子1雀頭パターンの判定
- [ ] Option型を使った面子の存在表現

### 2.3 和了判定
- [ ] 有効な面子組み合わせの検証
- [ ] 和了形の判定関数
- [ ] テストケース（和了手、ノーテン手）

**習得スキル**
- [ ] 関数分解技法
- [ ] 合成可能な設計
- [ ] パターンマッチングの活用
- [ ] Maybe/Option型の活用

---

## フェーズ3: 基本役判定 → 複合役
**学習目標：Railway-Oriented Programming**

### 3.1 基本役の実装
- [ ] タンヤオ（中張牌のみ）の判定
- [ ] ピンフ（順子4つ+雀頭）の判定
- [ ] トイトイ（刻子4つ）の判定
- [ ] ホンイツ（一色+字牌）の判定

### 3.2 複合役の処理
- [ ] チンイツ（一色のみ）の判定
- [ ] サンアンコ（暗刻3つ）の判定
- [ ] 複数役の組み合わせ検証
- [ ] 役なし（ノーテン）の処理

### 3.3 エラーハンドリング
- [ ] 役判定のResult型チェーン
- [ ] 複数バリデーションの合成
- [ ] ドメインエラーの明確な表現

**習得スキル**
- [ ] Railway-Oriented Programming
- [ ] エラー合成パターン
- [ ] 型安全なエラーハンドリング
- [ ] 複数のバリデーション結果の合成

---

## フェーズ4: 点数計算 → 特殊役
**学習目標：ワークフローとドメインイベント**

### 4.1 翻数計算
- [ ] 各役の翻数定義
- [ ] 役リストから翻数合計の計算
- [ ] 40符固定での点数計算ワークフロー

### 4.2 特殊ケース
- [ ] 役満の処理（大三元、四暗刻など）
- [ ] 複合不可の役の処理
- [ ] 最高点役の選択ロジック

### 4.3 ワークフロー設計
- [ ] 手牌→役判定→点数計算の一連の流れ
- [ ] 副作用の分離と制御
- [ ] ドメインイベントによる結果の表現

**習得スキル**
- [ ] ワークフロー設計
- [ ] 副作用管理
- [ ] ドメインイベントパターン
- [ ] 高階関数による柔軟な計算ロジック

---

## 完了チェック

### 全体的な習得確認
- [ ] 型安全性：不正な状態をコンパイル時に防げている
- [ ] 関数合成：小さな関数を組み合わせて複雑なロジックを構築
- [ ] エラーハンドリング：Railway-Oriented Programmingを実践
- [ ] ドメイン表現：麻雀のルールがコードに直接表現されている
- [ ] テスト：各フェーズで適切なテストケースを作成
- [ ] パフォーマンス：関数型アプローチでも実用的な速度

### 次のステップ（拡張課題）
- [ ] 変形役（七対子、国士無双）の追加
- [ ] ゲーム状態役（リーチ、一発）の追加
- [ ] 符計算の実装
- [ ] 親子概念の追加
- [ ] ドラの実装

## メモ・学習記録
```
各フェーズ完了時に学んだことや課題をここに記録
```
